<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <meta name="theme-color" content="#2563eb" />
  <title>Griffin Journey</title>

  <!-- å…±ç”¨æ¨£å¼ï¼ˆå« TTF å­—å‹èˆ‡è¼‰å…¥é®ç½©æ¨£å¼ï¼‰ -->
  <link rel="stylesheet" href="./assets/css/style.css" />

  <script src="./assets/js/guard.js" defer></script>
  
  <!-- åªç”¨ TTF é è¼‰ï¼ˆè«‹ç¢ºèªæª”æ¡ˆå­˜åœ¨æ–¼ docs/assets/fonts/ï¼‰ -->
  <link rel="preload" href="./assets/fonts/GenSenRounded2TC-L-02.ttf" as="font" type="font/ttf" crossorigin>
  <link rel="preload" href="./assets/fonts/GenSenRounded2PJP-L-04.ttf" as="font" type="font/ttf" crossorigin>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => navigator.serviceWorker.register('./sw.js'));
    }
  </script>
</head>
<body class="theme-auto">
  <!-- çœŸæ­£çš„è¼‰å…¥é®ç½© -->
  <div id="loading" class="loading-overlay" role="status" aria-live="polite" aria-label="å…§å®¹è¼‰å…¥ä¸­">
    <div class="loading-box">
      <div class="loading-spinner" aria-hidden="true"></div>
      <span>å…§å®¹è¼‰å…¥ä¸­â€¦</span>
    </div>
  </div>

  <noscript>
    <div class="container note">
      æœ¬é éœ€è¦å•Ÿç”¨ JavaScript æ‰èƒ½è¼‰å…¥ç« ç¯€å…§å®¹ã€‚
    </div>
  </noscript>

  <header class="topbar container">
    <a class="btn" href="./index.html" title="å›é¦–é ">ğŸ </a>
    <h1 id="book-title" class="brand">Loadingâ€¦</h1>
    <div class="spacer"></div>
    <div class="reader-controls">
      <button id="btn-font-dec" class="btn ghost" title="ç¸®å°å­—ç´š">Aâˆ’</button>
      <button id="btn-font-inc" class="btn ghost" title="æ”¾å¤§å­—ç´š">A+</button>
      <button id="btn-theme" class="btn ghost" title="äº®/æš—/è‡ªå‹•">ğŸŒ“</button>
      <button id="btn-toc" class="btn" title="ç« ç¯€ç›®éŒ„">ğŸ“– ç›®éŒ„</button>
    </div>
  </header>

  <aside id="toc-drawer" class="toc-drawer">
    <div class="toc-head">
      <strong id="toc-title">ç« ç¯€ç›®éŒ„</strong>
      <button id="btn-toc-close" class="btn ghost">âœ•</button>
    </div>
    <nav id="toc-list" class="toc-list"></nav>
  </aside>
  <div id="scrim" class="scrim"></div>

  <main id="reader" class="container reader" aria-busy="true">
    <article id="chapter" class="chapter">Loadingâ€¦</article>

    <nav class="reader-nav">
      <a id="prev" class="btn" href="#">â† ä¸Šä¸€ç« </a>
      <span class="progress" id="progress">ç¬¬ 1 / 17 ç« </span>
      <a id="next" class="btn" href="#">ä¸‹ä¸€ç«  â†’</a>
    </nav>
  </main>

  <button id="btn-top" class="btn fab" title="å›åˆ°é ‚éƒ¨">â†‘</button>

  <footer class="container footnotes">
    <small id="foot-info"></small>
  </footer>

  <!-- âœ… æ¨™æº– Markdown è§£æå™¨ï¼ˆCDNï¼‰ -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- å…¥å£è…³æœ¬ï¼ˆä¿æŒä½ çš„åŸæœ‰æª”åèˆ‡é †åºï¼‰ -->
  <script type="module" src="./assets/js/app-reader.js"></script>
  <script type="module" src="./assets/js/ui.js"></script>
  <script type="module" src="./assets/js/toc.js"></script>

  <!-- ä¿éšªé–¥ï¼š15s å¾Œå¼·åˆ¶æ”¶èµ·é®ç½© -->
  <script>
    (function(){
      const loading = document.getElementById('loading');
      const reader = document.getElementById('reader');
      setTimeout(() => {
        loading?.setAttribute('hidden','');
        reader?.setAttribute('aria-busy','false');
      }, 15000);
      const ch = document.getElementById('chapter');
      const mo = new MutationObserver(() => {
        const txt = (ch.textContent||'').trim();
        if (txt && txt !== 'Loadingâ€¦') {
          loading?.setAttribute('hidden','');
          reader?.setAttribute('aria-busy','false');
          mo.disconnect();
        }
      });
      mo.observe(ch, {childList:true,subtree:true,characterData:true});
    })();
  </script>
</body>
</html>


